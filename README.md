## –º–æ–π-–∞—Ä—Ö–∏–≤.—Ä—Ñ
![](docs/screenshots/home.png)

–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É—á—ë—Ç–∞ —Ñ–∏–ª—å–º–æ–≤ –∏ —Å–µ—Ä–∏–∞–ª–æ–≤: —è —Å–¥–µ–ª–∞–ª —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç, —á—Ç–æ–±—ã —É–¥–æ–±–Ω–æ –≤–µ—Å—Ç–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –º–µ–¥–∏–∞‚Äë–∞—Ä—Ö–∏–≤, –æ—Ç–º–µ—á–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —Å–µ–∑–æ–Ω–∞–º –∏ —ç–ø–∏–∑–æ–¥–∞–º –∏ —Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ —Å–≤–æ—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–æ—Å–º–æ—Ç—Ä–∞. –ü—Ä–æ–µ–∫—Ç —Ä–∞–∑–¥–µ–ª—ë–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä (`Express + PostgreSQL`) –∏ –∫–ª–∏–µ–Ω—Ç (`React + Vite`), –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –º–æ–¥—É–ª–µ–π —è –ø—Ä–æ–¥—É–º—ã–≤–∞–ª –ø–æ–¥ —Ä–µ–∞–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

### –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–∫–ª—é—á–µ–≤—ã–µ-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏-–∏-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
- [–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω](#—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ-–≤-–ø—Ä–æ–¥–∞–∫—à–Ω)
- [CI/CD](#cicd)
- [–°–∫—Ä–∏–Ω—à–æ—Ç—ã](#—Å–∫—Ä–∏–Ω—à–æ—Ç—ã)

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîê –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ JWT (access + refresh) —Å —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Ç–æ–∫–µ–Ω–æ–≤ –≤ HTTP‚Äëonly cookies.
- üé¨ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π —Ñ–∏–ª—å–º–æ–≤ –∏ —Å–µ—Ä–∏–∞–ª–æ–≤ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏ –∏ –∑–∞–º–µ—Ç–∫–∞–º–∏.
- üì∫ –£—á—ë—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø–æ —Å–µ–∑–æ–Ω–∞–º –∏ —ç–ø–∏–∑–æ–¥–∞–º, –æ—Ç–º–µ—Ç–∫–∏ ¬´–ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ¬ª.
- üìä –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: –∂–∞–Ω—Ä—ã, —Ä–µ–π—Ç–∏–Ω–≥, –¥–∏–Ω–∞–º–∏–∫–∞ –ø–æ –º–µ—Å—è—Ü–∞–º, —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ñ–∏–ª—å–º–æ–≤/—Å–µ—Ä–∏–∞–ª–æ–≤.
- üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Kinopoisk API –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫.
- üß™ Unit –∏ integration‚Äë—Ç–µ—Å—Ç—ã (Jest + Supertest) –¥–ª—è –∫–ª—é—á–µ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.
- üê≥ –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ CI/CD.

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–°–µ—Ä–≤–µ—Ä**

- `Node.js`, `Express`, `TypeScript`.
- –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ `PostgreSQL`, –º–∏–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ SQL‚Äë—Ñ–∞–π–ª—ã.
- –°–ª–æ–∏: `domain` / `application` / `infrastructure` / `app` (–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã, middlewares, –º–∞—Ä—à—Ä—É—Ç—ã).
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è: JWT (access + refresh), HTTP‚Äëonly cookies, –∑–∞—â–∏—Ç–∞ CSRF, rate limiting, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è Prometheus.

**–ö–ª–∏–µ–Ω—Ç**

- `React`, `TypeScript`, `Vite`.
- –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ `react-router-dom`.
- Tailwind CSS + –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.
- –û—Ç–¥–µ–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è —Ñ–∏–ª—å–º–æ–≤, —Å–µ—Ä–∏–∞–ª–æ–≤, –ø—Ä–æ—Ñ–∏–ª—è –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
git clone <repo-url>
cd media-archive
npm install

# –ó–∞–ø—É—Å–∫ –∫–ª–∏–µ–Ω—Ç + —Å–µ—Ä–≤–µ—Ä –ª–æ–∫–∞–ª—å–Ω–æ (–±–µ–∑ Docker)
npm run dev --workspace server
npm run dev --workspace client

# –∏–ª–∏ —Ü–µ–ª–∏–∫–æ–º —á–µ—Ä–µ–∑ Docker
docker compose up --build
```

–°–µ—Ä–≤–µ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:4000`, –∫–ª–∏–µ–Ω—Ç ‚Äî –Ω–∞ `http://localhost:5173`.

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ `.env` –≤ –∫–æ—Ä–Ω–µ:

```bash
PORT=4000
NODE_ENV=development
API_BASE_URL=http://localhost:4000
FRONTEND_URL=http://localhost:5173

PGHOST=localhost
PGPORT=5432
PGUSER=postgres
PGPASSWORD=postgres
PGDATABASE=media_archive

JWT_SECRET=dev-access-secret-change-me
JWT_REFRESH_SECRET=dev-refresh-secret-change-me
ACCESS_TOKEN_TTL_MINUTES=15
REFRESH_TOKEN_TTL_DAYS=30

KINOPOISK_API_URL=https://kinopoiskapiunofficial.tech
KINOPOISK_API_KEY=<–≤–∞—à_–∫–ª—é—á>
GOOGLE_CLIENT_ID=<–≤–∞—à_client_id>

# SMTP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (—Å–º. docs/SMTP_SETUP.md)
SMTP_HOST=smtp.yandex.ru
SMTP_PORT=465
SMTP_SECURE=true
SMTP_USER=–≤–∞—à_email@yandex.ru
SMTP_PASSWORD=–ø–∞—Ä–æ–ª—å_–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
SMTP_FROM=–≤–∞—à_email@yandex.ru
EMAIL_VERIFICATION_TOKEN_TTL_HOURS=24
```

–í Docker Compose —á–∞—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (—Å–º. `docker-compose.yml`).

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SMTP –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ email

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è email –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å SMTP —Å–µ—Ä–≤–µ—Ä. –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ [`docs/SMTP_SETUP.md`](docs/SMTP_SETUP.md).

**–ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –Ø–Ω–¥–µ–∫—Å.–ü–æ—á—Ç—ã** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è .ru –¥–æ–º–µ–Ω–æ–≤):

1. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ https://id.yandex.ru/security
2. –î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
```bash
SMTP_HOST=smtp.yandex.ru
SMTP_PORT=465
SMTP_SECURE=true
SMTP_USER=–≤–∞—à_email@yandex.ru
SMTP_PASSWORD=–ø–∞—Ä–æ–ª—å_–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
SMTP_FROM=–≤–∞—à_email@yandex.ru
```

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ VPS‚Äë—Å–µ—Ä–≤–µ—Ä–µ —Å –¥–æ—Å—Ç—É–ø–æ–º –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `DEPLOY.md`.

–û—Å–Ω–æ–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:
- **VPS —Å Docker** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) ‚Äî –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å, –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
- **Render.com** ‚Äî –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ö–æ—Å—Ç–∏–Ω–≥ –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.
- **Fly.io** ‚Äî –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ–Ω—ã–π –ø–ª–∞–Ω —Å —Ö–æ—Ä–æ—à–∏–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏.

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω‚Äë—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `docker-compose.prod.yml`:

```bash
docker compose -f docker-compose.prod.yml up -d --build
```

### CI/CD

GitHub Actions (`.github/workflows/ci.yml`, –µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏) –º–æ–∂–µ—Ç:

1. –∑–∞–ø—É—Å–∫–∞—Ç—å `npm ci`;
2. –ø—Ä–æ–≥–æ–Ω—è—Ç—å –ª–∏–Ω—Ç–µ—Ä—ã –∏ —Ç–µ—Å—Ç—ã;
3. —Å–æ–±–∏—Ä–∞—Ç—å —Å–µ—Ä–≤–µ—Ä –∏ –∫–ª–∏–µ–Ω—Ç;
4. –≤—ã–ø–æ–ª–Ω—è—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏.

### –°–∫—Ä–∏–Ω—à–æ—Ç—ã

| –≠–∫—Ä–∞–Ω | –ü—Ä–µ–≤—å—é |
|-------|--------|
| –ì–ª–∞–≤–Ω–∞—è / –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ | ![–ì–ª–∞–≤–Ω–∞—è](docs/screenshots/home.png) |
| –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–ª—å–º–∞/—Å–µ—Ä–∏–∞–ª–∞ | ![–î–æ–±–∞–≤–ª–µ–Ω–∏–µ](docs/screenshots/add_movie.png) |
| –ö–∞—Ä—Ç–æ—á–∫–∞ —Ñ–∏–ª—å–º–∞ | ![–ö–∞—Ä—Ç–æ—á–∫–∞ —Ñ–∏–ª—å–º–∞](docs/screenshots/movie.png) |
| –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | ![–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞](docs/screenshots/stats.png) |
