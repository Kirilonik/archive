# Media Archive

![](docs/screenshots/home.png)

–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ –º–µ–¥–∏–∞-–∞—Ä—Ö–∏–≤–∞: —Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∏–ª—å–º—ã –∏ —Å–µ—Ä–∏–∞–ª—ã, –æ—Ç–º–µ—á–∞–π—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —Å–µ–∑–æ–Ω–∞–º –∏ —ç–ø–∏–∑–æ–¥–∞–º, –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–æ—Å–º–æ—Ç—Ä–∞. –ü—Ä–æ–µ–∫—Ç —Ä–∞–∑–¥–µ–ª—ë–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä (`Express + PostgreSQL`) –∏ –∫–ª–∏–µ–Ω—Ç (`React + Vite`), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç—Ä–æ–≥—É—é —Å–ª–æ–∏—Å—Ç—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏ –≥–æ—Ç–æ–≤ –∫ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–º—É —Ä–∞–∑–≤–∏—Ç–∏—é.

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–∫–ª—é—á–µ–≤—ã–µ-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
- [–°–∫—Ä–∏–ø—Ç—ã](#—Å–∫—Ä–∏–ø—Ç—ã)
- [CI/CD](#cicd)
- [–°–∫—Ä–∏–Ω—à–æ—Ç—ã](#—Å–∫—Ä–∏–Ω—à–æ—Ç—ã)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è)
- [–ß–µ–∫-–ª–∏—Å—Ç—ã](#—á–µ–∫-–ª–∏—Å—Ç—ã)
- [–î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞](#–¥–æ—Ä–æ–∂–Ω–∞—è-–∫–∞—Ä—Ç–∞)

## –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîê –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ JWT (access + refresh) —Å —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Ç–æ–∫–µ–Ω–æ–≤ –≤ HTTP-only cookies.
- üé¨ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π —Ñ–∏–ª—å–º–æ–≤ –∏ —Å–µ—Ä–∏–∞–ª–æ–≤ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏ –∏ –∑–∞–º–µ—Ç–∫–∞–º–∏.
- üì∫ –£—á—ë—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø–æ —Å–µ–∑–æ–Ω–∞–º –∏ —ç–ø–∏–∑–æ–¥–∞–º, –æ—Ç–º–µ—Ç–∫–∏ ¬´–ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ¬ª.
- üìä –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: –∂–∞–Ω—Ä—ã, —Ä–µ–π—Ç–∏–Ω–≥, –¥–∏–Ω–∞–º–∏–∫–∞ –ø–æ –º–µ—Å—è—Ü–∞–º, —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ñ–∏–ª—å–º–æ–≤/—Å–µ—Ä–∏–∞–ª–æ–≤.
- üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Kinopoisk API –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫.
- üß™ –ü–æ–∫—Ä—ã—Ç–∏–µ unit –∏ integration —Ç–µ—Å—Ç–∞–º–∏ (Jest + Supertest).
- üê≥ –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ CI/CD.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–°–µ—Ä–≤–µ—Ä —Å–ª–µ–¥—É–µ—Ç —Å–ª–æ–∏—Å—Ç–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ (—Å–º. `server/ARCHITECTURE.md`):

- `app/` ‚Äî HTTP-—Å–ª–æ–π: –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã, –º–∞—Ä—à—Ä—É—Ç—ã, middleware, DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.
- `application/` ‚Äî –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ use-case —Å–µ—Ä–≤–∏—Å—ã.
- `domain/` ‚Äî —Å—É—â–Ω–æ—Å—Ç–∏, —Ç–∏–ø—ã, –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤.
- `infrastructure/` ‚Äî –∞–¥–∞–ø—Ç–µ—Ä—ã –ë–î –∏ –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (PostgreSQL, Kinopoisk).
- `config/` ‚Äî –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î.
- `test/` ‚Äî –µ–¥–∏–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤.

–ö–ª–∏–µ–Ω—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ React + Vite, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (`AuthProvider`) –∏ –∑–∞—â–∏—â—ë–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 20+
- npm 10+
- Docker & Docker Compose (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞)
- PostgreSQL 16 (–µ—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –±–µ–∑ Docker)

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
git clone <repo-url>
cd media-archive
npm install

# –ó–∞–ø—É—Å–∫ –∫–ª–∏–µ–Ω—Ç + —Å–µ—Ä–≤–µ—Ä –ª–æ–∫–∞–ª—å–Ω–æ (–±–µ–∑ Docker)
npm run dev --workspace server
npm run dev --workspace client

# –∏–ª–∏ —Ü–µ–ª–∏–∫–æ–º —á–µ—Ä–µ–∑ Docker
docker compose up --build
```

–°–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:4000`, –∫–ª–∏–µ–Ω—Ç ‚Äî `http://localhost:5173`.

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ `.env` –≤ –∫–æ—Ä–Ω–µ:

```
PORT=4000
NODE_ENV=development
API_BASE_URL=http://localhost:4000
FRONTEND_URL=http://localhost:5173

PGHOST=localhost
PGPORT=5432
PGUSER=postgres
PGPASSWORD=postgres
PGDATABASE=media_archive

JWT_SECRET=dev-access-secret-change-me
JWT_REFRESH_SECRET=dev-refresh-secret-change-me
ACCESS_TOKEN_TTL_MINUTES=15
REFRESH_TOKEN_TTL_DAYS=30

KINOPOISK_API_URL=https://kinopoiskapiunofficial.tech
KINOPOISK_API_KEY=<–≤–∞—à_–∫–ª—é—á>
GOOGLE_CLIENT_ID=<–≤–∞—à_client_id>
```

–í Docker Compose —á–∞—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (—Å–º. `docker-compose.yml` –∏ `DEPLOY.md`).

## –°–∫—Ä–∏–ø—Ç—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|
| `npm install` | —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è |
| `npm run dev -w server` | –∑–∞–ø—É—Å–∫ backend –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ |
| `npm run dev -w client` | –∑–∞–ø—É—Å–∫ frontend —á–µ—Ä–µ–∑ Vite |
| `npm run build -w server` | —Å–±–æ—Ä–∫–∞ TypeScript-—Å–µ—Ä–≤–µ—Ä–∞ (tsc) |
| `npm run build -w client` | production-—Å–±–æ—Ä–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞ |
| `npm run lint` | –∑–∞–ø—É—Å–∫ ESLint –¥–ª—è –≤—Å–µ—Ö –ø–∞–∫–µ—Ç–æ–≤ |
| `npm run test` | Jest-—Ç–µ—Å—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞ (unit + integration) |
| `docker compose up --build` | –ø–æ–ª–Ω—ã–π –∑–∞–ø—É—Å–∫ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö |

## CI/CD

GitHub Actions (`.github/workflows/ci.yml`) –≤—ã–ø–æ–ª–Ω—è–µ—Ç:

1. `npm ci`
2. `npm run lint`
3. `npm run test`
4. `npm -w server run build`
5. `node server/dist/db/migrate.js` (–ø—Ä–æ–≥–æ–Ω –º–∏–≥—Ä–∞—Ü–∏–π –Ω–∞ —Å–≤–µ–∂–µ–π –ë–î)
6. `npm -w client run build`

–ü–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á–µ–∫-–ª–∏—Å—Ç—ã –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ smoke-—Ç–µ—Å—Ç—ã API (—Å–º. –Ω–∏–∂–µ).

## –°–∫—Ä–∏–Ω—à–æ—Ç—ã

–ü–æ–ª–æ–∂–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∫–∞—Ç–∞–ª–æ–≥ `docs/screenshots/` (–Ω–∞–ø—Ä–∏–º–µ—Ä: `docs/screenshots/home.png`, `docs/screenshots/details.png`).  
–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∏ –∏–ª–∏ –∑–∞–º–µ–Ω–∏—Ç—å –∑–∞–≥–ª—É—à–∫–∏ –Ω–∏–∂–µ.

| –≠–∫—Ä–∞–Ω | –ü—Ä–µ–≤—å—é |
|-------|--------|
| –ì–ª–∞–≤–Ω–∞—è / –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ | ![–ì–ª–∞–≤–Ω–∞—è](docs/screenshots/home.png) |
| –ö–∞—Ä—Ç–æ—á–∫–∞ —Ñ–∏–ª—å–º–∞ | ![–ö–∞—Ä—Ç–æ—á–∫–∞ —Ñ–∏–ª—å–º–∞](docs/screenshots/movie.png) |
| –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | ![–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞](docs/screenshots/stats.png) |

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```
media-archive/
  client/                # React + Vite –∫–ª–∏–µ–Ω—Ç
  server/                # Express + PostgreSQL backend
    src/app/             # HTTP-—Å–ª–æ–π
    src/application/     # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
    src/domain/          # –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∏ —Å—É—â–Ω–æ—Å—Ç–∏
    src/infrastructure/  # –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
    src/config/          # env, db
    src/test/            # –æ–±—â–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤
  shared/                # –æ–±—â–∏–µ —Ç–∏–ø—ã/—É—Ç–∏–ª–∏—Ç—ã
  docs/                  # –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —á–µ–∫-–ª–∏—Å—Ç—ã
  docker-compose.yml
  README.md
```

## –ß–µ–∫-–ª–∏—Å—Ç—ã

–ü–æ–¥—Ä–æ–±–Ω—ã–µ —Å–ø–∏—Å–∫–∏ –ø–µ—Ä–µ–¥ PR, —Ä–µ–ª–∏–∑–æ–º –∏ –ø–æ—Å–ª–µ –≤—ã–∫–ª–∞–¥–∫–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `docs/CHECKLISTS.md`. –ö—Ä–∞—Ç–∫–æ:

- –ü–µ—Ä–µ–¥ PR: `npm run lint`, `npm run test`, –æ–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å docker build.
- –ü–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º: —á–∏—Å—Ç—ã–π –ø–æ–¥—ä—ë–º `docker compose up --build`, smoke API-—Ç–µ—Å—Ç—ã, –ø—Ä–æ–≤–µ—Ä–∫–∞ `.env`.
- –ü–æ—Å–ª–µ –≤—ã–∫–ª–∞–¥–∫–∏: –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤, –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/refresh —Ç–æ–∫–µ–Ω–æ–≤, –∫–æ–Ω—Ç—Ä–æ–ª—å —Ç–∞–±–ª–∏—Ü—ã `migrations`.

## –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞

- üìÅ –î–æ–±–∞–≤–∏—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏/–ø–ª–µ–π–ª–∏—Å—Ç–∞–º–∏.
- üì® –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —ç–ø–∏–∑–æ–¥–∞—Ö (email/telegram).
- üì± –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –∏ PWA.
- ‚ú® –£–ª—É—á—à–µ–Ω–∏–µ UI/UX (—Ñ–∏–ª—å—Ç—Ä—ã, —Ç—ë–º–Ω–∞—è —Ç–µ–º–∞).
- üß† –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω–æ–≥–æ.

---

–ï—Å–ª–∏ –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –∏–¥–µ–∏ –ø–æ —Ä–∞–∑–≤–∏—Ç–∏—é –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ issue –∏–ª–∏ pull request! –ë—É–¥—É —Ä–∞–¥ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–µ –∏ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏.

